name: Change README

on:
  schedule:
    - cron: '0 0,9,12,15,18,21 * * *' # 0:00, 9:00, 12:00, 15:00, 18:00, 21:00 JST (日本時間)
  workflow_dispatch:

jobs:
  change-readme:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v2

      - name: Update README
        run: |
          # 日本時間の取得
          JST=$(TZ=Asia/Tokyo date "+%H")

          # 日中か夜間か判定
          if [ $JST -ge 9 ] && [ $JST -lt 21 ]; then
            echo "Hello, it's daytime in Japan!" > README.md
          else
            echo "Good evening, it's nighttime in Japan!" > README.md
          fi

      - name: Commit and push changes
        uses: stefanzweifel/git-auto-commit-action@v4
        with:
          commit_message: "Update README"
          commit_options: "--no-verify"
